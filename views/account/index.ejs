<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>SB Admin 2 - Dashboard</title>

  <!-- Custom fonts for this template-->
  
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <!-- Custom styles for this template-->
  <link href="/css/sb-admin-2.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/manage-teams.css">
  <link rel="stylesheet" type="text/css" href="/css/athlete.css">
  
   <!-- Bootstrap -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

  <!-- Date picker -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
  
  <script src="https://kit.fontawesome.com/51d5218d26.js" crossorigin="anonymous"></script>

</head>

<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">
    <%-include('../general/nav.ejs') %>
    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <%-include('../general/topbar.ejs') %>
      
        <!-- Begin Page Content -->
        <div class="container-fluid">
          <div class="row">
            <main role="main" class="col-md-12 col-lg-12 px-4">
                <h1>Tài khoản</h1>
              <div class="row mt-4">

                
                <div class="col-12 d-flex justify-content-between">
                  <div >
                    <input class="form-control" type="text" name="" value="" placeholder="Tìm kiếm">
                  </div>
                  <div class="mb-3">
                    <!-- <a href="/admin/user/upgrade" class="p-2 btn btn-primary btn-sm ml-1" role="button"
                          aria-pressed="true">Upgrade Required</a> -->
                    <a href="#create-account-modal" class="p-2 btn btn-success btn-sm" role="button" aria-pressed="true" data-toggle="modal">
                      <i class="fa fa-plus mr-2" aria-hidden="true"></i>Thêm</a>
                  </div>
                </div>
                <div class="col-12">
                  <div class="main-box no-header clearfix">
                    <div class="main-box-body clearfix">
                      <div class="table-responsive">
                        <table class="table user-list">
                          <thead>
                            <tr>
                              <th class="text-center"><span>STT <i class="fas fa-sort"></i></span></th>
                              <th class="text-center"><span>Username <i class="fas fa-sort"></i></span></th>
                              <th class="text-center" contenteditable=""><span>Vai trò <i class="fas fa-sort"></i></span></th>
                              <th class="text-center"><span>Ghi chú<i class="fas fa-sort"></i></span></th>
                              
                              <th>&nbsp;</th>
                            </tr>
                          </thead>
                          <tbody>
                            <% accountList.forEach(function(account, key) { %>
                              <tr>
                                <td class="text-center">
                                  <%=Number.parseInt(key) + 1%>
                                </td>
                                <td class="text-center">
                                  <%= account.username %>
                                </td>
                                <td class="text-center">
                                  <%= account.account_role.name %>
                                </td>
                                <td class="text-center">
                                  <% if (account.account_team) { %>
                                    <%= account.account_team.name %>
                                  <% } %>
                                </td>
                                <td style="width: 7%;">
                                  <a href="/admin/user/add?id={{_id}}" class="table-link">
                                    <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
                                    </span>
                                  </a>
                                  <a href="/admin/user/delete/{{_id}}" class="table-link danger"
                                    onclick="return confirm('Bạn có muốn xoá đội bóng này?')">
                                    <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
                                    </span>
                                  </a>
                                </td>
                              </tr>
                              <% }) %>
                          </tbody>
                          
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </main>
          </div>
        </div>
        <!--===============================================================================================-->
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

      <!-- Footer -->
      <footer class="sticky-footer bg-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            <span>Copyright &copy; Your Website 2020</span>
          </div>
        </div>
      </footer>
      <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

    

  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

 
    <!-- Info Model -->
    <div id="create-account-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="my-modal-title" aria-hidden="true" style="padding-bottom: 100px">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="my-modal-title">Thêm mới tài khoản</h5>
            <button class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form id="create-account-form">
              
              <div class="form-group">
                <label for="username">Username</label>
                <input id="username" class="form-control" type="text" name="username" value="" autocomplete="off">
                
              </div>
              <div class="form-group">
                <label for="password">Password</label>
                <input id="password" class="form-control" type="password" name="password" value="" autocomplete="off">
                
              </div>
              
              <div class="form-group">
                <label for="role">Vai trò</label>
                <select id="role" class="form-control" name="role">
                  <% roleList.forEach(function(role) { %>
                    <option value="<%= role.code %>"> <%= role.name %></option>
                    <% })%>
                </select>
              
            </div>
              
              <button type="submit" class="btn btn-primary" style="float: right">Lưu</button>
            </form>
          </div>
          
        </div>
      </div>
    </div>
  

  <!-- Bootstrap core JavaScript-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  

  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="js/sb-admin-2.min.js"></script>

  <!-- Page level plugins -->
  <script src="vendor/chart.js/Chart.min.js"></script>

  <!-- Page level custom scripts -->
  <script src="js/demo/chart-area-demo.js"></script>
  <script src="js/demo/chart-pie-demo.js"></script>

  <script>
    $(document).ready(() => {
      //validate account
      $('#create-account-form').submit((e) => {
        e.preventDefault();
        const username = $('#username').val();
        const password = $('#password').val();
        const roleCode = $('#role').val();
        if (!username || !password) {
          //show error
          console.log('Nhap day du cac truong');
          return;
        }

        $.ajax({
          type: 'POST',
          url: '/accounts/create-account',
          data: {
            username,
            password,
            roleCode
          },
          success: function(data, statusCode) {
            location.reload();
          }
        })
      })
    })

    
  </script>

</body>

</html>